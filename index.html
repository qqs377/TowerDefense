<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roguelike Tower Defense</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="topbar">
    <h1>Tower Defense</h1>
    <div class="stats">
      <div>üí∞ Money: <span id="money">0</span></div>
      <div>‚ù§Ô∏è Lives: <span id="lives">0</span></div>
      <div>üåä Wave: <span id="wave">0</span></div>
      <div>üè¢ Floor: <span id="floor">1</span></div>
      <div>‚≠ê Score: <span id="score">0</span></div>
    </div>
  </header>
  
  <main class="layout">
    <section class="board">
      <canvas id="game" width="900" height="600"></canvas>
      <div id="tooltip" class="tooltip" hidden></div>
      <div id="gameOverModal" class="modal" hidden>
        <div class="modal-content">
          <h2 id="gameOverTitle">Game Over</h2>
          <p>Final Score: <span id="finalScore">0</span></p>
          <p>Floor Reached: <span id="finalFloor">1</span></p>
          <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
          <div class="modal-buttons">
            <button id="submitScore">Submit Score</button>
            <button id="restartGame">Play Again</button>
          </div>
        </div>
      </div>
    </section>
    
    <aside class="sidebar">
      <div class="panel">
        <h2>Build Towers</h2>
        <div class="tower-buttons">
          <button class="tower-btn" data-type="basic">
            <div class="tower-icon basic"></div>
            <div class="tower-info">
              <strong>Basic</strong><br>
              <small>Cost: 30 | Range: 140</small><br>
              <small>Damage: 10</small>
            </div>
          </button>
          <button class="tower-btn" data-type="sniper">
            <div class="tower-icon sniper"></div>
            <div class="tower-info">
              <strong>Sniper</strong><br>
              <small>Cost: 50 | Range: 260</small><br>
              <small>Damage: 28</small>
            </div>
          </button>
          <button class="tower-btn" data-type="slow">
            <div class="tower-icon slow"></div>
            <div class="tower-info">
              <strong>Frost</strong><br>
              <small>Cost: 40 | Range: 120</small><br>
              <small>Slows enemies</small>
            </div>
          </button>
          <button class="tower-btn" data-type="splash">
            <div class="tower-icon splash"></div>
            <div class="tower-info">
              <strong>Splash</strong><br>
              <small>Cost: 70 | Range: 100</small><br>
              <small>Area damage</small>
            </div>
          </button>
          <button class="tower-btn" data-type="laser">
            <div class="tower-icon laser"></div>
            <div class="tower-info">
              <strong>Laser</strong><br>
              <small>Cost: 90 | Range: 180</small><br>
              <small>Piercing beam</small>
            </div>
          </button>
        </div>
      </div>
      
      <div class="panel">
        <h2>Tower Upgrades</h2>
        <div id="upgradePanel" class="upgrade-panel" hidden>
          <h3 id="selectedTowerType">Select a tower</h3>
          <div class="upgrade-options">
            <button id="upgradeDamage" class="upgrade-btn">
              üó°Ô∏è Upgrade Damage<br>
              <small>Cost: <span id="damageCost">0</span></small>
            </button>
            <button id="upgradeRange" class="upgrade-btn">
              üéØ Upgrade Range<br>
              <small>Cost: <span id="rangeCost">0</span></small>
            </button>
            <button id="upgradeSpeed" class="upgrade-btn">
              ‚ö° Upgrade Speed<br>
              <small>Cost: <span id="speedCost">0</span></small>
            </button>
          </div>
          <div class="tower-stats">
            <div>Level: <span id="towerLevel">1</span></div>
            <div>Damage: <span id="towerDamage">0</span></div>
            <div>Range: <span id="towerRange">0</span></div>
            <div>Fire Rate: <span id="towerFireRate">0</span></div>
            <div>Sell Value: <span id="towerSellValue">0</span></div>
          </div>
        </div>
        <p class="hint">Click a tower to upgrade it</p>
      </div>
      
      <div class="panel">
        <h2>Controls</h2>
        <div class="controls">
          <button id="startWave">Start Wave</button>
          <button id="pauseResume">Pause</button>
          <button id="sellMode">Sell Mode: Off</button>
          <button id="nextFloor" hidden>Next Floor</button>
        </div>
      </div>
      
      <div class="panel">
        <h2>Leaderboard</h2>
        <div id="leaderboard" class="leaderboard">
          <div class="loading">Loading...</div>
        </div>
      </div>
    </aside>
  </main>
  
  <script src="game.js"></script>
</body>
</html>
